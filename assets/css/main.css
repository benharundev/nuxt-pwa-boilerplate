/* ============================================================
   Main CSS — Nuxt PWA Boilerplate
   Apple HIG Design System Entry Point
   ============================================================ */

@import './materials.css';
@import './typography.css';
@import './safe-areas.css';
@import './transitions.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── CSS Custom Properties ─── */
:root {
    /* ─── Semantic Colors — Light Mode ─── */
    --color-bg-primary: #FFFFFF;
    --color-bg-secondary: #F2F2F7;
    --color-bg-tertiary: #FFFFFF;
    --color-bg-grouped: #F2F2F7;

    --color-label: rgba(0, 0, 0, 0.85);
    --color-label-secondary: rgba(60, 60, 67, 0.60);
    --color-label-tertiary: rgba(60, 60, 67, 0.30);
    --color-label-quaternary: rgba(60, 60, 67, 0.18);

    --color-accent: #007AFF;
    --color-accent-rgb: 0, 122, 255;
    --color-success: #34C759;
    --color-warning: #FF9500;
    --color-error: #FF3B30;
    --color-tint: #5AC8FA;

    /* ─── Sidebar widths ─── */
    --sidebar-width: 240px;
    --sidebar-width-icon: 68px;
    --content-list-width: 320px;

    /* ─── Radius ─── */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 20px;
    --radius-2xl: 28px;
}

/* ─── Dark Mode Semantic Colors ─── */
.dark {
    --color-bg-primary: #1C1C1E;
    --color-bg-secondary: #000000;
    --color-bg-tertiary: #2C2C2E;
    --color-bg-grouped: #000000;

    --color-label: rgba(255, 255, 255, 0.90);
    --color-label-secondary: rgba(235, 235, 245, 0.60);
    --color-label-tertiary: rgba(235, 235, 245, 0.30);
    --color-label-quaternary: rgba(235, 235, 245, 0.18);

    --color-accent: #0A84FF;
    --color-accent-rgb: 10, 132, 255;
    --color-success: #30D158;
    --color-warning: #FF9F0A;
    --color-error: #FF453A;
    --color-tint: #64D2FF;
}

/* ─── Base Resets ─── */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text",
        "Helvetica Neue", Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-feature-settings: "kern" 1;
    scroll-behavior: smooth;
    /* Prevent zoom on input focus (iOS) */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
}

body {
    background-color: var(--color-bg-secondary);
    color: var(--color-label);
    overflow-x: hidden;
    /* Use dvh for correct iOS Safari viewport */
    min-height: 100dvh;
}

/* Prevent selection highlight on taps */
button,
a,
[role="button"] {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
}

/* ─── Scrollbar Styling (macOS WebKit) ─── */
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--color-label-quaternary);
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--color-label-tertiary);
}

/* ─── Selection ─── */
::selection {
    background: rgba(var(--color-accent-rgb), 0.25);
    color: var(--color-label);
}

/* ─── Focus Ring (accessibility) ─── */
:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: var(--radius-sm);
}

/* ─── Link reset ─── */
a {
    color: var(--color-accent);
    text-decoration: none;
}

/* ─── Images ─── */
img,
video {
    max-width: 100%;
    height: auto;
    display: block;
}